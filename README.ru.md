# Frame Forge

[![en](https://img.shields.io/badge/lang-en-red.svg)](https://github.com/itjn-ru/layout_editor/blob/frame_forge/README.md)
[![ru](https://img.shields.io/badge/lang-ru-blue.svg)](https://github.com/itjn-ru/layout_editor/blob/frame_forge/README.ru.md)

## –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.
–í –µ–≥–æ –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ XML –∫–∞–∫ —Ñ–æ—Ä–º–∞—Ç–∞ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã UI. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –æ–Ω –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π BDUI (Backend-Driven UI).

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
üìå XML-—Ä–∞–∑–º–µ—Ç–∫–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞.
üìå –†–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å UI –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ XML.
üìå –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–∞–µ–º—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
üìå –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –≥–¥–µ UI —á–∞—Å—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –∏ –¥–æ–ª–∂–µ–Ω —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º.
 
## Motivation
–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞, –∑–∞–≥—Ä—É–∑–∫–∏ –≤ store –∏–∑–º–µ–Ω—è—Ç—å UI –∏ –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞.   
![admin-layout-photo](./doc/images/admin-layout-photo.png)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ –≤–∞—à `pubspec.yaml`:

```yaml
dependencies:
  frame_forge: ^1.0.0
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞—Ç—å DSL –º–æ–¥–µ–ª—å
- –î–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–æ–≤ –¥–ª—è LayoutModel.
- –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

```dart
  final LayoutModel layoutModel = LayoutModel(
    screenSizes: [ScreenSizeEnum.mobile, ScreenSizeEnum.desktop],
  );
  
  late final LayoutModelController _layoutModelController =
      LayoutModelController(
        layoutModel: layoutModel,
        projectSaver: (map) async {
          // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
          return true;
        },
        projectLoader: (isSaved) async {
          /// –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –∏–∑ —Ñ–∞–π–ª–∞
          final FilePickerResult? result = await FilePicker.platform.pickFiles();
          if (result == null) return null;
          final PlatformFile file = result.files.first;
          return utf8.decode(file.bytes! as List<int>);
        },
      );
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–í—ã–≤–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º–∞–∫–µ—Ç–∞:
```dart
Column(
  children: [
    Items(layoutModel.root, layoutModel),
  ],
),
```

–í—ã–≤–æ–¥ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞–∫–µ—Ç–∞:
```dart
Column(
  children: [
    Items(
        layoutModel.root.items
            .whereType<SourcePage>()
            .first, layoutModel,
    ),
  ],
),
```

–í—ã–≤–æ–¥ —Å—Ç–∏–ª–µ–π –º–∞–∫–µ—Ç–∞:
```dart
Column(
  children: [
    Items(
        layoutModel.root.items
            .whereType<StylePage>()
            .first, layoutModel, 
    ),
  ],
),
```

–í—ã–≤–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –º–∞–∫–µ—Ç–∞:
```dart
Column(
  children: [
    ProcessItems(
        layoutModel.root.items
            .whereType<ProcessPage>()
            .first,layoutModel,
    ),
  ],
),
```

–í—ã–≤–æ–¥ –≤—å—é—à–∫–∏, –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–≥–ª—è–¥–∏—Ç
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞ –∏–∑ [enum ScreenSizeEnum]
```dart
LayoutBuilder(
    builder: (context, constraints) {
        return Consumer<LayoutModel>(
            builder: (context, value, child) {
                return ComponentsAndSources(value,constraints, screenSize);
            },
        );
    }
),
```
